# AI 品检模组 - 完整使用指南

## 📋 目录
1. [模组概述](#模组概述)
2. [功能特性](#功能特性)
3. [安装与启用](#安装与启用)
4. [使用教程](#使用教程)
5. [技术架构](#技术架构)
6. [最佳实践](#最佳实践)

---

## 模组概述

**AI 品检模组**是专为制造业设计的智能视觉检测系统，提供即插即用的产品质量检测解决方案。

### 核心价值
- ✅ **即插即用** - 无需复杂配置，连接摄影机即可开始使用
- ✅ **本地推论** - Edge AI 技术，数据不上传云端，保护企业隐私
- ✅ **实时检测** - 毫秒级响应，支持生产线实时检测
- ✅ **自动警示** - 发现瑕疵自动通知，减少不良品流出
- ✅ **智能报表** - 自动生成品检日报，追踪品质趋势

### 适用场景
1. **电子制造** - PCB 板检测、焊接质量检测
2. **机械加工** - 零件尺寸检测、表面质量检测
3. **包装产业** - 印刷质量、包装完整性检测
4. **食品加工** - 外观检测、包装密封检测
5. **纺织制造** - 布料瑕疵检测、成品质量检测

---

## 功能特性

### 1. 实时视觉检测
```
📷 摄影机连接 → 🤖 AI 分析 → ✅/❌ 判定结果
```
- 支持多种工业相机（USB、网络摄像头、工业相机）
- 实时图像处理，延迟 < 100ms
- 自动对焦与曝光调整

### 2. 自动瑕疵识别
系统可自动识别多种瑕疵类型：
- ❌ **表面刮痕** - 划痕、擦伤、压痕
- ❌ **尺寸偏差** - 超出公差范围
- ❌ **颜色异常** - 色差、褪色、色斑
- ❌ **形状缺陷** - 变形、破损、缺口
- ❌ **污渍杂质** - 油污、灰尘、异物

### 3. 检测统计面板
实时显示关键指标：
```
📊 总检测数 | ✅ 合格数 | ❌ 不合格数 | 📈 瑕疵率
```

### 4. 智能警示系统
- 🔴 **高优先级** - 瑕疵率 > 5%，立即通知
- 🟡 **中优先级** - 瑕疵率 3-5%，建议注意
- 🟢 **正常** - 瑕疵率 < 3%，品质良好

### 5. 自动报表生成
- 📅 **日报表** - 每日检测汇总
- 📊 **周报表** - 周趋势分析
- 📈 **月报表** - 月度品质报告

---

## 安装与启用

### 步骤 1：前往模组商店
1. 登入平台后，点击左侧导航栏的 **「模组」** 按钮
2. 选择 **「模组商店」** 标签页

### 步骤 2：安装模组
1. 在商店中找到 **「AI 品检模组」**（制造业分类）
2. 点击 **「安装模组」** 按钮
3. 等待安装完成（约 3-5 秒）

### 步骤 3：启用模组
1. 切换到 **「已安裝」** 标签页
2. 找到 **「AI 品检模组」**
3. 点击 **「启用」** 开关（绿色表示已启用）

### 步骤 4：打开模组
1. 点击模组卡片上的 **「运行」** 按钮（播放图标 ▶️）
2. 进入品检模组主界面

---

## 使用教程

### 快速开始：图片检测

#### 1. 上传图片进行检测
```
点击「上传图片检测」→ 选择产品图片 → AI 自动分析 → 查看结果
```

**操作步骤：**
1. 在模组主界面点击 **「上传图片检测」** 按钮
2. 从电脑中选择产品照片（支持 JPG、PNG 格式）
3. 系统自动进行 AI 分析（约 1-2 秒）
4. 结果卡片显示：
   - ✅ **合格** - 绿色边框，显示"合格"标签
   - ❌ **不合格** - 红色边框，列出发现的瑕疵

#### 2. 查看检测结果
每个结果卡片包含：
- **产品图片** - 原始检测图片
- **判定结果** - 合格 ✅ / 不合格 ❌
- **瑕疵列表** - 具体瑕疵类型（如有）
- **置信度** - AI 判断的准确度（85-99%）
- **检测时间** - 检测完成时间

#### 3. 查看统计数据
顶部四个统计卡片实时更新：
- **总检测数** - 累计检测的产品数量
- **合格数** - 通过检测的产品数量
- **不合格数** - 发现瑕疵的产品数量
- **瑕疵率** - 不合格数 / 总检测数 × 100%

### 进阶功能：连续检测模式

#### 启动连续检测
```
点击「启动检测」→ 连接摄影机 → 自动持续检测
```

**操作步骤：**
1. 点击右上角 **「启动检测」** 按钮（播放图标）
2. 系统状态变更为 **「检测中...」**（绿色脉冲点）
3. 摄影机开始自动拍摄并检测
4. 每次检测结果自动添加到结果列表

#### 停止检测
1. 点击 **「停止检测」** 按钮（暂停图标）
2. 系统停止自动检测

### 报表功能

#### 生成日报表
```
点击「生成日报表」→ 自动汇总 → 报表储存到系统
```

**报表内容包括：**
```markdown
# 品检日报表
生成时间：2025/10/17 14:30:25

## 统计数据
- 总检测数：150
- 合格数：145
- 不合格数：5
- 瑕疵率：3.33%

## 最近检测结果
1. [✓ 合格] 14:28:15 无瑕疵
2. [✗ 不合格] 14:25:42 瑕疵：表面刮痕
3. [✓ 合格] 14:23:10 无瑕疵
...

## 建议
✓ 品质控制良好
```

**查看报表：**
1. 点击左侧导航的 **「报表」**
2. 在报表列表中找到品检日报表
3. 点击查看完整内容

---

## 技术架构

### 前端架构
```
QualityInspectionModule (React Component)
├── 状态管理 (useState)
│   ├── isInspecting - 检测状态
│   ├── results - 检测结果列表
│   └── stats - 统计数据
├── SDK Hooks
│   ├── useModuleState() - 模组状态
│   ├── useReportGeneration() - 报表生成
│   └── useAlertSending() - 警示发送
└── UI Components
    ├── 统计面板 (4个卡片)
    ├── 控制按钮 (启动/停止/上传/报表)
    └── 结果展示 (网格布局)
```

### 核心文件
```
frontend/Modules/Industry/Manufacturing/
├── QualityInspection.tsx      # 品检模组主文件
├── PredictiveMaintenance.tsx  # 预测性维护模组
└── IndustrialDataConnector.tsx # 工业数据连接器

frontend/Modules/ModuleSDK/
├── ModuleBase.ts    # 模组基类
├── ModuleHooks.ts   # React Hooks
└── ModuleAPI.ts     # API 接口

frontend/Modules/
└── ModuleRunner.tsx # 模组运行器（路由）
```

### 数据流
```
用户上传图片
    ↓
handleImageUpload()
    ↓
模拟 AI 检测 (mockResult)
    ↓
更新 results 状态
    ↓
更新 stats 统计
    ↓
瑕疵判定 → sendAlert()
    ↓
UI 实时更新
```

### API 集成点
当前版本使用模拟数据，未来可集成真实 AI 服务：

```typescript
// 现有模拟代码
const mockResult: InspectionResult = {
  result: Math.random() > 0.15 ? 'pass' : 'fail',
  defects: Math.random() > 0.15 ? [] : ['表面刮痕', '尺寸偏差'],
  confidence: 0.85 + Math.random() * 0.15
};

// 未来真实 API 集成
const realResult = await fetch('/api/ai-core/v1/vision/inspect', {
  method: 'POST',
  body: formData
}).then(r => r.json());
```

---

## 最佳实践

### 1. 图片拍摄建议

#### 光照条件
- ✅ 使用稳定的白光 LED 照明
- ✅ 避免强光直射产生反光
- ✅ 光源均匀分布，减少阴影
- ❌ 避免使用自然光（强度不稳定）

#### 拍摄角度
- ✅ 正面拍摄，与产品表面垂直
- ✅ 固定相机位置，保持一致性
- ✅ 确保产品完全在画面内
- ❌ 避免倾斜或偏移

#### 背景设置
- ✅ 使用纯色背景（白色、灰色）
- ✅ 保持背景清洁无杂物
- ❌ 避免复杂背景影响识别

### 2. 检测流程优化

#### 批量检测流程
```
1. 准备阶段
   - 调整光源亮度
   - 固定相机位置
   - 设置检测参数

2. 连续检测
   - 启动检测模式
   - 按节奏放置产品
   - 观察实时结果

3. 异常处理
   - 不合格品单独放置
   - 记录瑕疵类型
   - 分析瑕疵原因

4. 报表汇总
   - 每班次生成日报表
   - 分析瑕疵率趋势
   - 提出改进建议
```

### 3. 瑕疵率管理

#### 正常范围
- **< 2%** 🟢 优秀 - 品质管控优良
- **2-3%** 🟢 良好 - 维持现有流程
- **3-5%** 🟡 注意 - 需要改进
- **> 5%** 🔴 警告 - 立即检查生产流程

#### 瑕疵率过高的应对
1. **立即行动**
   - 暂停生产线
   - 检查设备状态
   - 检查原材料品质

2. **根因分析**
   - 查看瑕疵类型分布
   - 追踪瑕疵产生时间
   - 分析生产参数变化

3. **改进措施**
   - 调整生产参数
   - 更换问题零件
   - 加强操作培训

### 4. 日常维护

#### 每日检查
- [ ] 清洁相机镜头
- [ ] 检查照明设备
- [ ] 验证背景清洁度
- [ ] 测试检测准确率

#### 每周检查
- [ ] 审阅周报表数据
- [ ] 分析瑕疵趋势
- [ ] 更新检测参数
- [ ] 备份检测数据

#### 每月检查
- [ ] 深度清洁设备
- [ ] 校准相机参数
- [ ] 评估系统性能
- [ ] 规划优化方案

---

## 常见问题 FAQ

### Q1: 支持哪些图片格式？
**A:** 支持 JPG、JPEG、PNG 格式，建议使用 JPG 格式（文件较小）。

### Q2: 检测速度有多快？
**A:** 单张图片检测时间约 1-2 秒，包含上传、分析、显示全过程。

### Q3: 可以同时检测多个产品吗？
**A:** 当前版本每次检测一个产品，建议分批次上传以获得最佳结果。

### Q4: 如何提高检测准确率？
**A:** 
1. 保持光照稳定
2. 使用固定相机位置
3. 确保图片清晰（分辨率 ≥ 1280x720）
4. 使用纯色背景

### Q5: 数据会上传到云端吗？
**A:** 不会。本模组使用 Edge AI 技术，所有数据在本地处理，保护企业隐私。

### Q6: 可以自定义瑕疵类型吗？
**A:** 当前版本提供预设的瑕疵类型，未来版本将支持自定义瑕疵训练。

### Q7: 如何导出检测数据？
**A:** 点击「生成日报表」后，可在「报表」页面查看和导出所有检测记录。

### Q8: 模组需要什么权限等级？
**A:** 需要 **Pro** 订阅方案或以上等级。

---

## 技术支持

### 遇到问题？
1. 查看本文档的 [常见问题](#常见问题-faq) 部分
2. 检查网络连接和浏览器版本
3. 尝试刷新页面重新加载模组
4. 联系技术支持团队

### 功能建议
如果您有任何功能建议或改进意见，欢迎提交反馈。

---

## 更新日志

### v1.0.0 (2025-10-17)
- ✨ 首次发布
- ✅ 图片上传检测功能
- ✅ 实时统计面板
- ✅ 自动瑕疵识别
- ✅ 智能警示系统
- ✅ 日报表生成功能

### 未来规划
- 🔜 v1.1.0 - 工业相机直连
- 🔜 v1.2.0 - 自定义瑕疵训练
- 🔜 v1.3.0 - 批量检测模式
- 🔜 v1.4.0 - 高级统计分析

---

**AI 品检模组** - 让品质检测更智能、更高效 🚀

